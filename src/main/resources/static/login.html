<!DOCTYPE html>
<html lang="en">
<head>
    <title>登录新闻发布系统后台</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
<div class="login-title">东软新闻发布系统后台<small>登录</small></div>
<div class="login-main">
    <div class="login-box">
        <div class="box">
            <h2>用户登录</h2>
            <form method="post" id="frm" action="getIsLogin">
                <p><label>帐号：</label><input type="text" name="username" id="username"/></p>
                <p><label>密码：</label><input type="password" name="password" id="password"/></p>
                <p><a class="btn" href="javascript:void(0)" onclick="postForm()">登录</a></p>
                <p><span id="msg" class="msg"></span></p>
            </form>
        </div>
    </div>
    <div class="footer">
        <p>XX学院  地址：XXXX<br/>电话：XXXXX  邮编：XXXXX</p>
    </div>
</div>
<script src="plug/layui/lay/modules/layer.js"></script>
<script src="plug/jquery/jquery-3.4.1.min.js"></script>
<script type="text/javascript">
    function postForm(){
        var manager_id=document.getElementById("username").value;
        var manager_pwd=document.getElementById("password").value;
        document.getElementById("msg").innerHTML="";
        if(manager_pwd == "" || manager_id==""){
            $("#msg").text("请输入用户名或密码");
            return;
        }
        $.ajax({
                url: "getIsLogin",
                contentType: "application/x-www-form-urlencoded",
                type:"post",
                data:{
                    username:$("#username").val(),
                    password:$("#password").val()
                },
                success: function(data){
                    console.log(data);
                    if (data.code == 0){
                        sessionStorage.setItem("page","1");
                        document.location.href = "main.html";
                    } else {
                        $("#msg").text("用户名或密码错误");
                    }
                },
                error:function (e) {
                    console.error(e);
                }
        });
    }
</script>
</body>
</html>
